<div align="center" ng-controller="ctrl.monitorManageController">
    <div class="tabbed-view tabbed-view--panel-edit">
        <div class="tabbed-view-header">
            <h2 class="tabbed-view-title">
                监控管理
            </h2>
            <ul class="gf-tabs">
                <li class="gf-tabs-item" >
                    <a class="gf-tabs-link" ng-click="confirmChangeTab(ctrl.panel.serverHost)" ng-class="{active: data.current == 1}">
                        查询
                    </a>
                </li>
                <li class="gf-tabs-item" >
                    <a class="gf-tabs-link" ng-if="data.current == 2" ng-class="{active: data.current == 2}">
                        编辑
                    </a>
                    <a class="gf-tabs-link" ng-if="data.current == 3" ng-class="{active: data.current == 3}">
                        新建
                    </a>
                </li>
            </ul>
        </div>
        <div class="tabbed-view-body">
            <div ng-if="data.current == 1">
                <div class="editor-row">
                    <table>
                        <tr>

                            <td>
                                <table>
                                    <tr>
                                        <td><span class="gf-form-label width-7">所属项目</span></td>
                                        <td><select size="1" class="gf-form-input" id="projectId" ng-model="projectId"  ng-change="selectChangeProject(ctrl.panel.serverHost)" style="width: auto">
                                            <option value="" >请选择所属项目</option>
                                            <option ng-repeat="project in ctrl.allAuthorizeProject" value="{{project.id}}" >{{project.projectName}}</option>
                                        </select>
                                        </td>
                                    </tr>
                                </table>

                            </td>

                            <td>
                                <input type="text" class="gf-form-input width-25"  placeholder=" 根据机器名称模糊查找" id="machineName" ng-model='machineName'></input>
                            </td>

                            <td style="width: 60px">
                                <a  ng-click="searchFunction(ctrl.panel.serverHost)">
                                    <i class="fa fa-search-plus" aria-hidden="true"></i>搜索
                                </a>
                            </td>
                            <td >
                                <a  ng-click="showAddMonitorMachineTab()">
                                    <i class="fa fa-plus" aria-hidden="true"></i>新建
                                </a>
                            </td>
                        </tr>
                    </table>
                    <br/>

                    <label hidden id="serverHost">{{ctrl.panel.serverHost}}</label>

                </div>
                <table border="2" width="100%" align="center">
                    <tr >
                        <td align="center">序号</td>
                        <td align="center">机器Id</td>
                        <td align="center">机器名称</td>
                        <td align="center">所属项目</td>
                        <td align="center">创建时间</td>
                        <td align="center">更新时间</td>
                        <td align="center" colspan="2">操作</td>
                    </tr>
                    <tr ng-repeat="machine in machineArray">
                        <td>{{$index+1}}</td>
                        <td>{{machine.id}}</td>
                        <td>{{machine.machineName}}</td>
                        <td>{{machine.projectId}}</td>
                        <td>{{machine.createTime| date:"yyyy-MM-dd HH:mm:ss"}}</td>
                        <td>{{machine.updateTime| date:"yyyy-MM-dd HH:mm:ss"}}</td>

                        <td  align="center"><input type="button" value="编辑" class="btn btn-primary"  ng-click="showEditMonitorMachineTab(ctrl.panel.serverHost,machine.id)" /></td>

                        <td  align="center"><input type="button" value="删除" class="btn btn-primary" ng-click="deleteMachineFunction(ctrl.panel.serverHost,machine.machineName,machine.id)"/></td>
                    </tr>
                </table>
                <br/>
                共{{total}}条&nbsp;&nbsp;
                第{{pageNum}}/{{pages}}页
                <input id="lastpage" class="btn btn-primary" type="button" ng-disabled="!hasPreviousPage" ng-click="lastPageFunction(ctrl.panel.serverHost)" value="上一页">
                <input id="nextpage" class="btn btn-primary" type="button" ng-disabled="!hasNextPage" ng-click="nextPageFunction(ctrl.panel.serverHost)" value="下一页">
                每页显示:
                <select ng-model="pageSize" ng-init="pageSize='5'" ng-change="selectChangePageSize()"  size="1" style="width: auto">
                    <option value="5">5
                    <option value="10">10
                    <option value="15">15
                </select>条
            </div>
            <div ng-if="data.current == 2||data.current == 3">
               <panel-editor-tab-monitor-manage-panel0>
                   <form role="form" name="myForm" ng-submit="submitForm(myForm.$valid)" class="form-horizontal" novalidate>
                    <div class="editor-row">
                        <div class="section gf-form-group">
                            <h5 class="section-heading">基本属性</h5>
                            <div class="gf-form" hidden>
                                <span class="gf-form-label width-7">机器id</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-disabled="data.current == 2"  ng-model="formData.id" type="text" placeholder="请填写机器Id">
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">机器名称</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-disabled="data.current == 2"  ng-model="formData.machineName" type="text" placeholder="请填写机器名称">
                            </div>

                            <div class="gf-form">
                                <span class="gf-form-label width-7">所属项目</span>
                                <select size="1" class="gf-form-input" ng-model="formData.projectId"  style="width: auto">
                                    <option ng-repeat="project in ctrl.allAuthorizeProject" value="{{project.id}}" >{{project.projectName}}</option>
                                </select>
                            </div>

                            <div class="gf-form">
                                <span class="gf-form-label width-7">操作系统</span>
                                <select size="1" style="width: auto" class="gf-form-input" ng-model="formData.operateSystemType" >
                                    <option value="0" selected>linux</option>
                                    <option value="1">windows</option>
                                    <option value="2">其他</option>
                                </select>
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">机器Ip</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-model="formData.machineIp" type="text" placeholder="请填写机器Ip，多个用英文逗号分隔">
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">机器描述</span>
                                <textarea class="gf-form-input width-31 ng-pristine ng-untouched ng-valid ng-empty"
                                          rows="1" ng-model="formData.machineDesc"
                                          placeholder="请填写机器的简要描述，限制100字符以内"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                       <div class="section gf-form-group">
                           <button class="btn btn-inverse" ng-click="saveOrUpdate(ctrl.panel.serverHost)">保存
                           </button>
                           <button class="btn btn-inverse" ng-click="confirmChangeTab(ctrl.panel.serverHost)">返回
                           </button>
                       </div>
                    </div>
                   </form>
               </panel-editor-tab-monitor-manage-panel0>
            </div>
        </div>
    </div>
</div>





