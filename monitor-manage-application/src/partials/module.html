<div align="center" ng-controller="ctrl.monitorManageController">
    <div class="tabbed-view tabbed-view--panel-edit">
        <div class="tabbed-view-header">
            <h2 class="tabbed-view-title">
                监控管理
            </h2>
            <ul class="gf-tabs">
                <li class="gf-tabs-item" >
                    <a class="gf-tabs-link" ng-click="confirmChangeTab(ctrl.panel.serverHost)" ng-class="{active: data.current == 1}">
                        查询
                    </a>
                </li>
                <li class="gf-tabs-item" >
                    <a class="gf-tabs-link" ng-if="data.current == 2" ng-class="{active: data.current == 2}">
                        编辑
                    </a>
                    <a class="gf-tabs-link" ng-if="data.current == 3" ng-class="{active: data.current == 3}">
                        新建
                    </a>
                </li>
            </ul>
        </div>
        <div class="tabbed-view-body">
            <div ng-if="data.current == 1">
                <div class="editor-row">
                    <table>
                        <tr>
                            <td>
                                <table>
                                    <tr>

                                        <td><span class="gf-form-label width-7">所属项目</span></td>
                                        <td><select size="1" class="gf-form-input" id="projectId" ng-model="projectId"  ng-change="selectChangeProject(ctrl.panel.serverHost)" style="width: auto">
                                            <option value="" >请选择所属项目</option>
                                            <option ng-repeat="project in ctrl.allAuthorizeProject" value="{{project.id}}" >{{project.projectName}}</option>
                                        </select>
                                        </td>





                                        <td><span class="gf-form-label width-7">所属机器</span></td>
                                        <td><select size="1" class="gf-form-input" id="machineId" ng-model="machineId"  ng-change="selectChangeMachine(ctrl.panel.serverHost)" style="width: auto">
                                            <option value="" >请选择所属机器</option>
                                            <option ng-repeat="machine in ctrl.allAuthorizeMachine" value="{{machine.id}}" >{{machine.machineName}}</option>
                                        </select>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <input type="text" class="gf-form-input width-25"  placeholder=" 根据应用名称模糊查找" id="applicationName" ng-model='applicationName'></input>
                            </td>
                            <td style="width: 60px">
                                <a  ng-click="searchFunction(ctrl.panel.serverHost)">
                                    <i class="fa fa-search-plus" aria-hidden="true"></i>搜索
                                </a>
                            </td>
                            <td >
                                <a  ng-click="showAddMonitorApplicationTab()">
                                    <i class="fa fa-plus" aria-hidden="true"></i>新建
                                </a>
                            </td>
                        </tr>
                    </table>
                    <br/>

                    <label hidden id="serverHost">{{ctrl.panel.serverHost}}</label>

                </div>
                <table border="2" width="100%" align="center">
                    <tr >
                        <td align="center">序号</td>
                        <td align="center">应用Id</td>
                        <td align="center">状态</td>
                        <td align="center">应用名称</td>
                        <td align="center">所属项目</td>
                        <td align="center">所属机器</td>
                        <td align="center">创建时间</td>
                        <td align="center">更新时间</td>
                        <td align="center" colspan="3">操作</td>
                    </tr>
                    <tr ng-repeat="application in applicationArray">
                        <td>{{$index+1}}</td>
                        <td>{{application.id}}</td>
                        <td>{{application.statusText}}</td>
                        <td>{{application.applicationName}}</td>
                        <td>{{application.projectName}}</td>
                        <td>{{application.machineName}}</td>
                        <td>{{application.createTime| date:"yyyy-MM-dd HH:mm:ss"}}</td>
                        <td>{{application.updateTime| date:"yyyy-MM-dd HH:mm:ss"}}</td>

                        <td  align="center">
                            <input type="button" value="暂停" ng-if="application.statusText=='启动'" class="btn btn-primary" ng-click="startOrPauseApplicationFunction(ctrl.panel.serverHost,application.id,1)"/>
                            <input type="button" value="启动" ng-if="application.statusText=='暂停'" class="btn btn-primary" ng-click="startOrPauseApplicationFunction(ctrl.panel.serverHost,application.id,0)"/>
                        </td>
                        <td  align="center"><input type="button" value="编辑" class="btn btn-primary"  ng-click="showEditMonitorApplicationTab(ctrl.panel.serverHost,application.id)" /></td>

                        <td  align="center"><input type="button" value="删除" class="btn btn-primary" ng-click="deleteApplicationFunction(ctrl.panel.serverHost,application.applicationName,application.id)"/></td>
                    </tr>
                </table>
                <br/>
                共{{total}}条&nbsp;&nbsp;
                第{{pageNum}}/{{pages}}页
                <input id="lastpage" class="btn btn-primary" type="button" ng-disabled="!hasPreviousPage" ng-click="lastPageFunction(ctrl.panel.serverHost)" value="上一页">
                <input id="nextpage" class="btn btn-primary" type="button" ng-disabled="!hasNextPage" ng-click="nextPageFunction(ctrl.panel.serverHost)" value="下一页">
                每页显示:
                <select ng-model="pageSize" ng-init="pageSize='5'" ng-change="selectChangePageSize()"  size="1" style="width: auto">
                    <option value="5">5
                    <option value="10">10
                    <option value="15">15
                </select>条
            </div>
            <div ng-if="data.current == 2||data.current == 3">
               <panel-editor-tab-monitor-manage-panel0>
                   <form role="form" name="myForm" ng-submit="submitForm(myForm.$valid)" class="form-horizontal" novalidate>
                    <div class="editor-row">
                        <div class="section gf-form-group">
                            <h5 class="section-heading">基本属性</h5>
                            <div class="gf-form" hidden>
                                <span class="gf-form-label width-7">应用id</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-disabled="data.current == 2"  ng-model="formData.id" type="text" placeholder="请填写应用Id">
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">应用名称</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-disabled="data.current == 2"  ng-model="formData.applicationName" type="text" placeholder="请填写应用名称">
                            </div>

                            <div class="gf-form">
                                <span class="gf-form-label width-7">所属项目</span>
                                <select size="1" ng-change="selectChangeFormDataProject(ctrl.panel.serverHost)" class="gf-form-input" ng-model="formData.projectId"  style="width: auto">
                                    <option ng-repeat="project in ctrl.allAuthorizeProject" value="{{project.id}}" >{{project.projectName}}</option>
                                </select>
                            </div>

                            <div class="gf-form">
                                <span class="gf-form-label width-7">所属机器</span>
                                <select size="1" class="gf-form-input" ng-model="formData.machineId"  style="width: auto">
                                    <option ng-repeat="machine in ctrl.allAuthorizeMachine" value="{{machine.id}}" >{{machine.machineName}}</option>
                                </select>
                            </div>

                            <div class="gf-form">
                                <span class="gf-form-label width-7">应用类型</span>
                                <select size="1" style="width: auto" class="gf-form-input" ng-model="formData.applicationType" >
                                    <option value="0" selected>应用服务器-tomcat</option>
                                    <option value="1">应用服务器-weblogic</option>
                                    <option value="2">数据库服务器-mysql</option>
                                    <option value="3">数据库服务器-oracle</option>
                                    <option value="4">消息队列-rabbitmq</option>
                                    <option value="5">消息队列-rocketmq</option>
                                </select>
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">应用参数(端口)</span>
                                <input class="gf-form-input width-25 ng-pristine ng-untouched ng-valid ng-not-empty"
                                       ng-model="formData.applicationDetailParam" type="text" placeholder="请填写应用参数">
                            </div>
                            <div class="gf-form">
                                <span class="gf-form-label width-7">应用描述</span>
                                <textarea class="gf-form-input width-31 ng-pristine ng-untouched ng-valid ng-empty"
                                          rows="1" ng-model="formData.applicationDesc"
                                          placeholder="请填写应用的简要描述，限制100字符以内"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                       <div class="section gf-form-group">
                           <button class="btn btn-inverse" ng-click="saveOrUpdate(ctrl.panel.serverHost)">保存
                           </button>
                           <button class="btn btn-inverse" ng-click="confirmChangeTab(ctrl.panel.serverHost)">返回
                           </button>
                       </div>
                    </div>
                   </form>
               </panel-editor-tab-monitor-manage-panel0>
            </div>
        </div>
    </div>
</div>